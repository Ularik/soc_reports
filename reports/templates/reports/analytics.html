{% extends "base.html" %}
{% block title %}Аналитика по типам атак{% endblock %}

{% load static %}

{% block content %}
  <div class="analitick-block">
    <div class="analitickOne">
      <h1>Аналитика по типам атак (в %)</h1>
      <form id="reports_filter" method="get" class="mb-4">
        <label>С:</label>
        <input type="date" name="start" value="{{ start }}">
        <label>По:</label>
        <input type="date" name="end"   value="{{ end }}">
        <button type="submit" class="btn btn-primary">Показать</button>
      </form>

      <div class="analytics-charts">
        <div style="width:30%;">
          <div>
            <canvas id="attack-methods-chart"></canvas>
          </div>
          <!-- Легенда по цветам -->
          <ul id="legend" class="list-unstyled mt-3"></ul>
        </div>

        <div style="width:30%;">
          <div>
            <canvas id="attack-risc-chart"></canvas>
          </div>
          <!-- Легенда по цветам -->
          <ul id="legend-risc" class="list-unstyled mt-3"></ul>
        </div>

        <div style="width:30%;">
          <div>
            <canvas id="countries-chart"></canvas>
          </div>
          <!-- Легенда по цветам -->
          <ul id="legend-countries" class="list-unstyled mt-3"></ul>
        </div>

      </div>

    </div>

    <div class="analitickTwo">
      <h1>Статистический отчет по работе</h1>
      <form id="static-report-form" method="get" class="mb-4">
        <label>С:</label>
        <input type="date" name="start" value="{{ start }}">
        <label>По:</label>
        <input type="date" name="end"   value="{{ end }}">
        <button type="submit" class="btn btn-primary">Показать</button>
      </form>

      <table class="table report-table">
        <thead>
          <tr>
            <th rowspan="3">№</th>
            <th rowspan="3">ФИО</th>
            <th class="lower-width" colspan="1" rowspan="3">Проанализированные правила</th>
            <th colspan="12">SOC</th>
            <th colspan="2">IRP</th>
            <th colspan="1">DZ</th>
            <th colspan="1">Рапорты</th>
          </tr>
          <tr>
            <th colspan="2">МФ</th>
            <th colspan="2">ГТС</th>
            <th colspan="2">ГНС</th>
            <th colspan="2">ГП "Инфоком"</th>
            <th colspan="2">МИД</th>
            <th colspan="2">УДП КР</th>
            <th colspan="1">Лож</th>
            <th colspan="2">СФ</th>
            <th class="foms" colspan="2">ФОM</th>
          </tr>
          <tr>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">0</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
            <th class="italic-red">Н</th><th class="italic-red">М</th>
          </tr>
        </thead>

        <tbody id="reportBody">
          <!-- Заполняется динамически -->
        </tbody>

      </table>
    </div>

  </div>

{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'js/analytics/fillPage.js' %}"></script>
  <script src="{% static 'js/analytics/statick-report-table.js' %}"></script>
{% endblock %}
